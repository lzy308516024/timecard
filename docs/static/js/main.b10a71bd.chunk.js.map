{"version":3,"sources":["App.js","index.js"],"names":["Option","Select","App","props","handleDelete","record","e","newData","state","tableData","filter","item","id","console","log","sum","reduce","acc","cur","Number","time2","length","ave","setState","total","average","setTimeout","data","JSON","stringify","localsum","localave","localStorage","setItem","handleClick","d","Date","toLocaleDateString","h1","h2","m1","m2","alert","time1","res","getTime","Math","floor","leave1","hours","leave2","minutes","pot","toFixed","obj","date","curDate","parse","parseInt","random","signIn","signOut","localData","handleInput","type","target","value","onChange","dateString","week","getDay","str","selectOnChange","onSearch","val","deletAll","removeItem","count","columns","title","dataIndex","key","render","text","size","onClick","getItem","this","span","className","direction","max","min","defaultValue","showSearch","placeholder","optionFilterProp","style","color","dataSource","rowKey","now","pagination","float","marginRight","danger","Component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b10a71bd.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Row, Col, Input, Button, Table, Space, DatePicker,Select } from \"antd\";\n\nimport \"./index.css\";\nconst { Option } = Select;\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      h1: 8,\n      h2: 20,\n      m1: 45,\n      m2: 0,\n      total: 0,\n      average: 0,\n      count: 0,\n      curDate:new Date().toLocaleDateString(),\n      columns: [\n        {\n          title:\"日期\",\n          dataIndex: \"date\",\n          key: \"date\",\n        },\n        // {\n        //   title: \"序号\",\n        //   dataIndex: \"id\",\n        //   key: \"id\",\n        // },\n        {\n          title: \"签到\",\n          dataIndex: \"signIn\",\n          key: \"signIn\",\n          // render: (text) => <a>{text}</a>,\n        },\n        {\n          title: \"签退\",\n          dataIndex: \"signOut\",\n          key: \"signOut\",\n        },\n        {\n          title: \"时长（分钟）\",\n          dataIndex: \"time1\",\n          key: \"time1\",\n        },\n        {\n          title: \"时长（小时）\",\n          dataIndex: \"time2\",\n          key: \"time2\",\n        },\n        {\n          title: \"操作\",\n          key: \"action\",\n          render: (text, record) => (\n            <Space size=\"middle\">\n              <a onClick={(e) => this.handleDelete(record, e)}>Delete</a>\n            </Space>\n          ),\n        },\n      ],\n      tableData: [\n        // {\n        //   key: \"1\",\n        //   indexSort: \"John Brown\",\n        //   signIn: \"8:32\",\n        //   signOut: \"22:00\",\n        //   time1: \"sada\",\n        //   time2: \"dfsdf\",\n        // },\n      ],\n    };\n  }\n\n  componentDidMount(){\n    let data =  localStorage.getItem('myData')\n    let sum = localStorage.getItem('localsum')\n    let ave = localStorage.getItem('localave')\n    console.log(data)\n    if(data){\n      data = JSON.parse(data)\n      sum = JSON.parse(sum)\n      ave = JSON.parse(ave)\n      this.setState({\n        tableData:data,\n        total:sum,\n        average:ave\n      })\n    }\n  }\n  \n  handleDelete = (record, e) => {\n    let newData = this.state.tableData.filter(function (item) {\n      return item.id !== record.id; //返回你选中删除之外的所有数据\n    });\n    console.log(newData);\n    let sum = newData.reduce((acc, cur) => acc + Number(cur.time2), 0);\n    console.log(this.state.tableData.length);\n    let ave = sum / (this.state.tableData.length - 1);\n    this.setState({\n      tableData: newData,\n      total: sum,\n      average: ave,\n    });\n   \n    setTimeout(() => {\n      let data = JSON.stringify(this.state.tableData);\n      let localsum = JSON.stringify(this.state.total);\n      let localave = JSON.stringify(this.state.average);\n      localStorage.setItem('myData',data)\n      localStorage.setItem('localsum',localsum)\n      localStorage.setItem('localave',localave)\n    }, 0);\n  };\n\n  handleClick = () => {\n    let d = new Date().toLocaleDateString();\n    let h1 = this.state.h1;\n    let h2 = this.state.h2;\n    let m1 = this.state.m1;\n    let m2 = this.state.m2;\n    \n    console.log(h1,h2)\n    if (h2 - h1 < 0) {\n      alert(\"签退时间要大于签到时间\");\n      return;\n    } else if (h2 == h1) {\n      if (m2 <= m1) {\n        alert(\"签退时间要大于签到时间\");\n        return;\n      }\n    }\n\n    let time1 = d + \" \" + h1 + \":\" + m1 + \":\" + \"00\";\n    let time2 = d + \" \" + h2 + \":\" + m2 + \":\" + \"00\";\n\n    let res = new Date(time2).getTime() - new Date(time1).getTime();\n    res = res - 1000 * 3600 * 1.5;\n    if (h2 > 18) {\n      res = res - 1000 * 60 * 40;\n    } else if (h2 == 18) {\n      if (m2 >= 40) {\n        res = res - 1000 * 60 * 40;\n      } else {\n        res = res - m2 * 60000;\n      }\n    }\n    let dayDiff = Math.floor(res / (24 * 3600 * 1000));\n\n    let leave1 = res % (24 * 3600 * 1000);\n\n    let hours = Math.floor(leave1 / (3600 * 1000));\n\n    let leave2 = leave1 % (3600 * 1000);\n\n    let minutes = Math.floor(leave2 / (60 * 1000));\n\n    let pot = Number(minutes / 60 + hours).toFixed(2);\n\n    let obj = {};\n    obj.date = this.state.curDate;\n    obj.id = Date.parse(new Date()) + parseInt(Math.random()*100000);\n    obj.signIn = `${h1}:${m1}`;\n    obj.signOut = `${h2}:${m2}`;\n    obj.time1 = `${hours}小时${minutes}分钟`;\n    obj.time2 = `${pot}`;\n\n    let sum = this.state.tableData.reduce(\n      (acc, cur) => acc + Number(cur.time2),\n      0\n    );\n   \n    sum = Number(sum) + Number(pot);\n    \n    console.log(this.state.tableData.length);\n    let ave = sum / (this.state.tableData.length + 1);\n\n    // const obj1 = {\n    //   key:12,\n    //   indexSort:12,\n    //   signIn:'8:20',\n    //   signOut:'22:00',\n    //   time1:'12312312',\n    //   time2:'fsdfsfsfsd'\n    // }\n    const { tableData, average, total } = this.state;\n    this.setState({\n      tableData: [...tableData, obj],\n      total: sum,\n      average: ave,\n      h1: 9,\n      h2: 20,\n      m1: 0,\n      m2: 0,\n    });\n    setTimeout(() => {\n      console.log(this.state.tableData)\n      let localData = JSON.stringify(this.state.tableData)\n      localStorage.setItem('myData',localData)\n      let localsum = JSON.stringify(this.state.total)\n      let localave = JSON.stringify(this.state.average)\n      localStorage.setItem('localsum',localsum)\n      localStorage.setItem('localave',localave)\n    }, 0);\n  };\n\n  handleInput = (type, e) => {\n    console.log(type, e.target.value);\n    this.setState({\n      [type]: e.target.value,\n    });\n  };\n\n  onChange = (date, dateString) => {\n    console.log(date, dateString);\n    let week = new Date(dateString).getDay();\n    console.log(typeof week);\n    let str = \"\";\n    if (week == 0) {\n      str = dateString + \"(星期日)\";\n    } else if (week == 1) {\n      str = dateString + \"(星期一)\";\n    } else if (week == 2) {\n      str = dateString + \"(星期二)\";\n    } else if (week == 3) {\n      str = dateString + \"(星期三)\";\n    } else if (week == 4) {\n      str = dateString + \"(星期四)\";\n    } else if (week == 5) {\n      str = dateString + \"(星期五)\";\n    } else if (week == 6) {\n      str = dateString + \"(星期六)\";\n    }\n\n    this.setState({\n      curDate: str,\n    });\n    setTimeout(() => {\n      console.log(this.state.curDate);\n    }, 0);\n  };\n  selectOnChange = (value)=>{\n    console.log(value)\n    this.setState({\n      h2:value\n    })\n  }\n  onSearch=(val) => {\n    console.log('search:', val);\n    \n  }\n  deletAll = () => {\n    if(this.state.tableData.length>0){\n      this.setState({\n        tableData:[],\n        total:0,\n        average:0\n      })\n      localStorage.removeItem('myData')\n      localStorage.removeItem('localsum')\n      localStorage.removeItem('localave')\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <>\n          <Row>\n            <Col span={8} className=\"left-pd\">\n              <div className=\"top\">\n                <div className=\"ml-space\">\n                  请选择日期: \n                  <Space direction=\"vertical\">\n                    <DatePicker onChange={this.onChange} />\n                  </Space>\n                </div>\n                <div>\n                  请输入签到时间：\n                  <Input\n                    type=\"Number\"\n                    max={24}\n                    min={0}\n                    className=\"single-input\"\n                    value={this.state.h1}\n                    onChange={(e) => {\n                      this.handleInput(\"h1\", e);\n                    }}\n                  />\n                  :\n                  <Input\n                    type=\"Number\"\n                    defaultValue={0}\n                    max={60}\n                    min={0}\n                    className=\"single-input\"\n                    value={this.state.m1}\n                    onChange={(e) => {\n                      this.handleInput(\"m1\", e);\n                    }}\n                  />\n                </div>\n              </div>\n              <div>\n                请输入签退时间：\n                <Select\n                  className=\"select-input\"\n                  showSearch\n                  placeholder=\"Select\"\n                  onChange={this.selectOnChange}\n                  value = {this.state.h2}\n                  onSearch={this.onSearch}\n                  optionFilterProp=\"children\"\n                >\n                  <Option value=\"17\">17</Option>\n                  <Option value=\"18\">18</Option>\n                  <Option value=\"19\">19</Option>\n                  <Option value=\"20\">20</Option>\n                  <Option value=\"21\">21</Option>\n                  <Option value=\"22\">22</Option>\n                  <Option value=\"23\">23</Option>\n                </Select>\n                :\n                <Input\n                  type=\"Number\"\n                  defaultValue={0}\n                  max={60}\n                  min={0}\n                  className=\"single-input\"\n                  value={this.state.m2}\n                  onChange={(e) => {\n                    this.handleInput(\"m2\", e);\n                  }}\n                />{\" \"}\n              </div>\n              <Button\n                type=\"primary\"\n                size=\"large\"\n                className=\"btn\"\n                onClick={this.handleClick}\n              >\n                计算\n              </Button>\n              <ul style={{ color: \"red\" }}>\n                <li>注意：</li>\n                <li>1.签到时间早于12点，签退时间晚于18点</li>\n                <li>2.不要输入负数以及其他数字以外的字符</li>\n              </ul>\n            </Col>\n            <Col span={16}>\n              <Table\n                className=\"top bottom\"\n                columns={this.state.columns}\n                dataSource={this.state.tableData}\n                rowKey={(record) => {\n                  return record.id + Date.now(); //在这里加上一个时间戳就可以了\n                }}\n                pagination={false}\n              />\n              <span className=\"ml-3\">\n                共{this.state.tableData.length}条数据\n              </span>{\" \"}\n              <Space>{}</Space>\n              <span className=\"ml-3\">共计{this.state.total}个小时</span>\n              <span>平均时长为{this.state.average}小时</span>\n              <span style={{float:\"right\",marginRight:\"100px\"}}><Button type=\"primary\" onClick={this.deletAll} danger>全部删除</Button></span>\n            </Col>\n          </Row>\n        </>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Button, DatePicker, version } from \"antd\";\nimport \"antd/dist/antd.css\";\n\nimport App from './App';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}